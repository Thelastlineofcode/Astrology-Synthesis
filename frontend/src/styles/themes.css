/* Theme system for light/dark mode
   Based on Healing Cosmos palette and design documentation
*/

/* Light theme is the default (already defined in variables.css) */
:root {
  /* Light theme overrides (default) */
  --bg-primary: var(--color-neutral-light);   /* #F5F3EE */
  --bg-secondary: #FFFFFF;
  --bg-hover: rgba(165, 184, 164, 0.1);       /* Secondary with low opacity */
  --surface-elev-1: #FFFFFF;
  --surface-elev-2: #F8F6F3;

  --text-primary: var(--color-neutral-dark);  /* #2D3142 */
  --text-secondary: rgba(62, 75, 110, 0.7);   /* Primary with opacity */
  --text-muted: var(--color-neutral-700);     /* #4A4E5C */
  
  --border-color: rgba(165, 184, 164, 0.3);   /* Secondary with opacity */
  --border-light: rgba(165, 184, 164, 0.15);  /* Lighter borders */
  
  /* Button overrides for light theme */
  --btn-primary-bg: var(--color-primary);
  --btn-primary-text: var(--color-neutral-light);
  --btn-secondary-bg: transparent;
  --btn-secondary-text: var(--color-primary);
  --btn-secondary-border: var(--color-primary);
}

/* Dark theme */
[data-theme="dark"] {
  --bg-primary: var(--color-neutral-dark);     /* #2D3142 */
  --bg-secondary: #3A4257;                     /* Lightened charcoal */
  --bg-hover: rgba(62, 75, 110, 0.2);          /* Primary with low opacity */
  --surface-elev-1: #3A4257;
  --surface-elev-2: #4A4E5C;

  --text-primary: var(--color-neutral-light);  /* #F5F3EE */
  --text-secondary: var(--color-secondary);    /* #A5B8A4 - Soft Sage */
  --text-muted: rgba(245, 243, 238, 0.7);      /* Light with opacity */
  
  --border-color: rgba(62, 75, 110, 0.4);      /* Primary with opacity */
  --border-light: rgba(62, 75, 110, 0.2);      /* Lighter borders */
  
  /* Button overrides for dark theme */
  --btn-primary-bg: var(--color-primary);
  --btn-primary-text: var(--color-neutral-light);
  --btn-secondary-bg: transparent;
  --btn-secondary-text: var(--color-secondary);
  --btn-secondary-border: var(--color-secondary);
}

/* Auto theme detection - system preference for dark mode */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme="light"]) {
    /* Apply dark theme when system prefers dark and no explicit light theme set */
    --bg-primary: var(--color-neutral-dark);
    --bg-secondary: #3A4257;
    --bg-hover: rgba(62, 75, 110, 0.2);
    --surface-elev-1: #3A4257;
    --surface-elev-2: #4A4E5C;

    --text-primary: var(--color-neutral-light);
    --text-secondary: var(--color-secondary);
    --text-muted: rgba(245, 243, 238, 0.7);
    
    --border-color: rgba(62, 75, 110, 0.4);
    --border-light: rgba(62, 75, 110, 0.2);
    
    --btn-primary-bg: var(--color-primary);
    --btn-primary-text: var(--color-neutral-light);
    --btn-secondary-bg: transparent;
    --btn-secondary-text: var(--color-secondary);
    --btn-secondary-border: var(--color-secondary);
  }
}

/* Focus styles that work in both themes */
*:focus {
  outline: var(--focus-ring);
  outline-offset: var(--focus-outline-offset);
}

/* Remove default focus for mouse users, keep for keyboard users */
*:focus:not(:focus-visible) {
  outline: none;
}

*:focus-visible {
  outline: var(--focus-ring);
  outline-offset: var(--focus-outline-offset);
}
